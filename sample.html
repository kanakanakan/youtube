<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>YouTube Shuffle Player</title>
    <link rel="stylesheet" href="./style copy.css">
    <script src="https://www.youtube.com/iframe_api"></script>
</head>

<body>
    <div class="wrapper">
        <!-- プレイヤーと操作パネル -->
        <section class="video-control">
            <div class="inner">
                <div id="player"></div>
                <nav>
                    <ul class="control-group">
                        <li class="btn" id="doplay">再生</li>
                        <li class="btn" id="dostop">停止</li>
                        <li class="btn" id="dopause">一時停止</li>
                        <li class="btn" id="mute">ミュート</li>
                        <li class="btn" id="do10sNext">10秒先へ</li>
                        <li class="btn" id="do10sPrev">10秒戻る</li>
                    </ul>
                    <ul class="select-group">
                        <li>
                            <select id="MovieId" class="ytMovie">
                                <option selected>選択してください。</option>
                                <option value="bjN-3EyXNyE">TRiDENT『Alive』MV</option>
                                <option value="We__CnrYa9U">TRiDENT『DISTINATION』</option>
                                <option value="I6ld4ecEp7s">TRiDENT『IMAGINATION』MV</option>
                                <option value="azQVVhMUz58">TRiDENT『Continue』MV</option>
                            </select>
                        </li>
                    </ul>
                    <ul class="speed-group">
                        <li>
                            <form id="doSpeed">
                                <input type="radio" id="mslow" name="speed" value="0.25">
                                <label for="mslow">0.25</label>
                                <input type="radio" id="slow" name="speed" value="0.5">
                                <label for="slow">0.5</label>
                                <input type="radio" id="normal" name="speed" value="1.0" checked>
                                <label for="normal">1</label>
                                <input type="radio" id="hspeed" name="speed" value="1.5">
                                <label for="hspeed">1.5</label>
                                <input type="radio" id="mhspeed" name="speed" value="2">
                                <label for="mhspeed">2</label>
                            </form>
                        </li>
                    </ul>
                </nav>
                <div class="control-group">
                    <label>ボリューム<input type="range" min="0" max="100" id="volume" value="50">
                        <span id="volumeNum">50</span>
                    </label>
                </div>
            </div>
        </section>

        <!-- シャッフルマシン -->
        <section class="shuffle-section">
            <div class="shuffle">
                <h3>シャッフルマシンで動画を選ぼう！</h3>
                <div id="shuffleDisplay" style="font-size: 24px; font-weight: bold; margin: 10px 0;">🎲 シャッフル未開始 🎲
                </div>
                <button id="shuffleStart">スタート</button>
                <button id="shuffleStop">ストップ</button>
            </div>
        </section>

        <div class="slot">
            <h3>スロットで動画を選ぼう！</h3>
            <div class="reels">
                <div class="reel" id="reel1">
                    <img src="./image/acjapan.jpg" alt="reel1" class="slot-image">
                    <button class="stop-btn" data-reel="1">STOP</button>
                </div>
                <div class="reel" id="reel2">
                    <img src="./image/acjapan.jpg" alt="reel2" class="slot-image">
                    <button class="stop-btn" data-reel="2">STOP</button>
                </div>
                <div class="reel" id="reel3">
                    <img src="./image/acjapan.jpg" alt="reel3" class="slot-image">
                    <button class="stop-btn" data-reel="3">STOP</button>
                </div>
            </div>
            <button id="startBtn">スタート</button>
            <div id="resultMessage"></div>
        </div>
    </div>

    <script>
        let player;
        const videoOptions = [
            { id: "rcghp1hPEKo", title: "【綾鷹】 おにぎり食堂 綾鷹屋 上白石 萌歌 TVCM" },
            { id: "Yqoa0s_yw7Q", title: "阿部寛／やかんの濃麦茶" },
            { id: "jXTX4oo96M8", title: "伊右衛門 特茶 『人生の階段』コウメ太夫" },
            { id: "XghThSrjknE", title: "お〜いお茶「お〜いオオタニサン！」" },
            { id: "aZYM6T_6LTY", title: "キリン 生茶「新・やさしさ」篇" },
            { id: "YK3p8Qp40f8", title: "十六茶 CM 新垣結衣" },
        ];

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '360',
                width: '640',
                videoId: 'rcghp1hPEKo',
                playerVars: { playsinline: 1, controls: 0 },
                events: {
                    'onReady': function (event) {
                        event.target.setVolume(50);
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const shuffleDisplay = document.getElementById('shuffleDisplay');
            const shuffleStartBtn = document.getElementById('shuffleStart');
            const shuffleStopBtn = document.getElementById('shuffleStop');

            let shuffleTimer = null;
            let currentShuffleIndex = 0;

            shuffleStartBtn.addEventListener('click', () => {
                if (shuffleTimer) return;
                shuffleTimer = setInterval(() => {
                    currentShuffleIndex = Math.floor(Math.random() * videoOptions.length);
                    shuffleDisplay.textContent = videoOptions[currentShuffleIndex].title;
                }, 100);
            });

            shuffleStopBtn.addEventListener('click', () => {
                if (!shuffleTimer) return;
                clearInterval(shuffleTimer);
                shuffleTimer = null;
                const selected = videoOptions[currentShuffleIndex];
                shuffleDisplay.textContent = `🎉 選ばれたのは「${selected.title}」でした！`;
                if (player && typeof player.loadVideoById === 'function') {
                    player.loadVideoById(selected.id);
                }
            });

            document.getElementById('doplay').addEventListener('click', () => player.playVideo());
            document.getElementById('dostop').addEventListener('click', () => player.stopVideo());
            document.getElementById('dopause').addEventListener('click', () => player.pauseVideo());

            const muteBtn = document.getElementById('mute');
            muteBtn.addEventListener('click', () => {
                if (player.isMuted()) {
                    player.unMute();
                    muteBtn.textContent = 'ミュート';
                } else {
                    player.mute();
                    muteBtn.textContent = 'ミュート解除';
                }
            });

            document.getElementById('do10sPrev').addEventListener('click', () => {
                const currentTime = player.getCurrentTime();
                player.seekTo(Math.max(0, currentTime - 10));
            });

            document.getElementById('do10sNext').addEventListener('click', () => {
                const currentTime = player.getCurrentTime();
                player.seekTo(currentTime + 10);
            });

            const volumeRange = document.getElementById('volume');
            const volumeNum = document.getElementById('volumeNum');
            volumeRange.addEventListener('input', () => {
                const vol = parseInt(volumeRange.value);
                player.setVolume(vol);
                volumeNum.textContent = vol;
            });

            document.getElementById('MovieId').addEventListener('change', function () {
                const newId = this.value;
                player.loadVideoById(newId);
            });

            document.getElementById('doSpeed').addEventListener('change', () => {
                const speed = parseFloat(document.querySelector('input[name="speed"]:checked').value);
                player.setPlaybackRate(speed);
            });
        });
    </script>

    <script src="./slot.js" defer></script>
</body>

</html>